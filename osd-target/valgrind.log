==4294== Memcheck, a memory error detector.
==4294== Copyright (C) 2002-2006, and GNU GPL'd, by Julian Seward et al.
==4294== Using LibVEX rev 1658, a library for dynamic binary translation.
==4294== Copyright (C) 2004-2006, and GNU GPL'd, by OpenWorks LLP.
==4294== Using valgrind-3.2.1, a dynamic binary instrumentation framework.
==4294== Copyright (C) 2000-2006, and GNU GPL'd, by Julian Seward et al.
==4294== For more details, rerun with: -v
==4294== 
==4294== My PID = 4294, parent PID = 4293.  Prog and args are:
==4294==    ./tgtd
==4294==    -f
==4294== 
==4294== Invalid read of size 2
==4294==    at 0x4063B3: tgt_device_update (target.c:348)
==4294==    by 0x40460A: device_mgmt (mgmt.c:179)
==4294==    by 0x40496A: tgt_mgmt (mgmt.c:278)
==4294==    by 0x405248: autoconf_iscsi_osdemu (mgmt.c:546)
==4294==    by 0x40561C: ipc_init (mgmt.c:653)
==4294==    by 0x404122: main (tgtd.c:335)
==4294==  Address 0x4E62544 is 12 bytes inside a block of size 13 alloc'd
==4294==    at 0x4A05879: malloc (vg_replace_malloc.c:149)
==4294==    by 0x405201: autoconf_iscsi_osdemu (mgmt.c:540)
==4294==    by 0x40561C: ipc_init (mgmt.c:653)
==4294==    by 0x404122: main (tgtd.c:335)
==4294== 
==4294== Invalid read of size 1
==4294==    at 0x4063BB: tgt_device_update (target.c:348)
==4294==    by 0x40460A: device_mgmt (mgmt.c:179)
==4294==    by 0x40496A: tgt_mgmt (mgmt.c:278)
==4294==    by 0x405248: autoconf_iscsi_osdemu (mgmt.c:546)
==4294==    by 0x40561C: ipc_init (mgmt.c:653)
==4294==    by 0x404122: main (tgtd.c:335)
==4294==  Address 0x4E62546 is 1 bytes after a block of size 13 alloc'd
==4294==    at 0x4A05879: malloc (vg_replace_malloc.c:149)
==4294==    by 0x405201: autoconf_iscsi_osdemu (mgmt.c:540)
==4294==    by 0x40561C: ipc_init (mgmt.c:653)
==4294==    by 0x404122: main (tgtd.c:335)
==4294== 
==4294== Conditional jump or move depends on uninitialised value(s)
==4294==    at 0x3772E30112: sqlite3_prepare (in /usr/lib64/libsqlite3.so.0.8.6)
==4294==    by 0x41ECE9: obj_insert (obj.c:24)
==4294==    by 0x417F2C: osd_initialize_db (osd.c:609)
==4294==    by 0x418261: osd_open (osd.c:678)
==4294==    by 0x418D8B: osd_format_osd (osd.c:985)
==4294==    by 0x41B95A: exec_service_action (cdb.c:620)
==4294==    by 0x41C299: osdemu_cmd_submit (cdb.c:807)
==4294==    by 0x40B9F2: bs_osdemu_cmd_submit (bs_osdemu.c:80)
==4294==    by 0x40A14F: osd_varlen_cdb (osd.c:159)
==4294==    by 0x40A4EB: scsi_cmd_perform (scsi.c:122)
==4294==    by 0x40672B: target_cmd_queue (target.c:431)
==4294==    by 0x40F340: iscsi_target_cmd_queue (iscsid.c:1086)
==4294== 
==4294== Conditional jump or move depends on uninitialised value(s)
==4294==    at 0x3772E30112: sqlite3_prepare (in /usr/lib64/libsqlite3.so.0.8.6)
==4294==    by 0x41CA78: attr_set_attr (attr.c:46)
==4294==    by 0x417FC9: osd_initialize_db (osd.c:616)
==4294==    by 0x418261: osd_open (osd.c:678)
==4294==    by 0x418D8B: osd_format_osd (osd.c:985)
==4294==    by 0x41B95A: exec_service_action (cdb.c:620)
==4294==    by 0x41C299: osdemu_cmd_submit (cdb.c:807)
==4294==    by 0x40B9F2: bs_osdemu_cmd_submit (bs_osdemu.c:80)
==4294==    by 0x40A14F: osd_varlen_cdb (osd.c:159)
==4294==    by 0x40A4EB: scsi_cmd_perform (scsi.c:122)
==4294==    by 0x40672B: target_cmd_queue (target.c:431)
==4294==    by 0x40F340: iscsi_target_cmd_queue (iscsid.c:1086)
==4294== 
==4294== Conditional jump or move depends on uninitialised value(s)
==4294==    at 0x3772E30112: sqlite3_prepare (in /usr/lib64/libsqlite3.so.0.8.6)
==4294==    by 0x41CA78: attr_set_attr (attr.c:46)
==4294==    by 0x418074: osd_initialize_db (osd.c:629)
==4294==    by 0x418261: osd_open (osd.c:678)
==4294==    by 0x418D8B: osd_format_osd (osd.c:985)
==4294==    by 0x41B95A: exec_service_action (cdb.c:620)
==4294==    by 0x41C299: osdemu_cmd_submit (cdb.c:807)
==4294==    by 0x40B9F2: bs_osdemu_cmd_submit (bs_osdemu.c:80)
==4294==    by 0x40A14F: osd_varlen_cdb (osd.c:159)
==4294==    by 0x40A4EB: scsi_cmd_perform (scsi.c:122)
==4294==    by 0x40672B: target_cmd_queue (target.c:431)
==4294==    by 0x40F340: iscsi_target_cmd_queue (iscsid.c:1086)
==4294== 
==4294== Conditional jump or move depends on uninitialised value(s)
==4294==    at 0x3772E30112: sqlite3_prepare (in /usr/lib64/libsqlite3.so.0.8.6)
==4294==    by 0x41CA78: attr_set_attr (attr.c:46)
==4294==    by 0x4180BB: osd_initialize_db (osd.c:636)
==4294==    by 0x418261: osd_open (osd.c:678)
==4294==    by 0x418D8B: osd_format_osd (osd.c:985)
==4294==    by 0x41B95A: exec_service_action (cdb.c:620)
==4294==    by 0x41C299: osdemu_cmd_submit (cdb.c:807)
==4294==    by 0x40B9F2: bs_osdemu_cmd_submit (bs_osdemu.c:80)
==4294==    by 0x40A14F: osd_varlen_cdb (osd.c:159)
==4294==    by 0x40A4EB: scsi_cmd_perform (scsi.c:122)
==4294==    by 0x40672B: target_cmd_queue (target.c:431)
==4294==    by 0x40F340: iscsi_target_cmd_queue (iscsid.c:1086)
==4294== 
==4294== Conditional jump or move depends on uninitialised value(s)
==4294==    at 0x3772E30112: sqlite3_prepare (in /usr/lib64/libsqlite3.so.0.8.6)
==4294==    by 0x41ECE9: obj_insert (obj.c:24)
==4294==    by 0x418A44: osd_create_partition (osd.c:890)
==4294==    by 0x41AF2E: cdb_create_partition (cdb.c:436)
==4294==    by 0x41B78A: exec_service_action (cdb.c:587)
==4294==    by 0x41C299: osdemu_cmd_submit (cdb.c:807)
==4294==    by 0x40B9F2: bs_osdemu_cmd_submit (bs_osdemu.c:80)
==4294==    by 0x40A14F: osd_varlen_cdb (osd.c:159)
==4294==    by 0x40A4EB: scsi_cmd_perform (scsi.c:122)
==4294==    by 0x40672B: target_cmd_queue (target.c:431)
==4294==    by 0x40F340: iscsi_target_cmd_queue (iscsid.c:1086)
==4294==    by 0x40F3D4: iscsi_scsi_cmd_execute (iscsid.c:1103)
==4294== 
==4294== Conditional jump or move depends on uninitialised value(s)
==4294==    at 0x3772E30112: sqlite3_prepare (in /usr/lib64/libsqlite3.so.0.8.6)
==4294==    by 0x41F3E9: obj_ispresent (obj.c:191)
==4294==    by 0x418552: osd_create (osd.c:787)
==4294==    by 0x41AD86: cdb_create (cdb.c:396)
==4294==    by 0x41B63C: exec_service_action (cdb.c:563)
==4294==    by 0x41C299: osdemu_cmd_submit (cdb.c:807)
==4294==    by 0x40B9F2: bs_osdemu_cmd_submit (bs_osdemu.c:80)
==4294==    by 0x40A14F: osd_varlen_cdb (osd.c:159)
==4294==    by 0x40A4EB: scsi_cmd_perform (scsi.c:122)
==4294==    by 0x40672B: target_cmd_queue (target.c:431)
==4294==    by 0x40F340: iscsi_target_cmd_queue (iscsid.c:1086)
==4294==    by 0x40F3D4: iscsi_scsi_cmd_execute (iscsid.c:1103)
==4294== 
==4294== Conditional jump or move depends on uninitialised value(s)
==4294==    at 0x3772E30112: sqlite3_prepare (in /usr/lib64/libsqlite3.so.0.8.6)
==4294==    by 0x41F029: obj_get_nextoid (obj.c:109)
==4294==    by 0x418597: osd_create (osd.c:794)
==4294==    by 0x41AD86: cdb_create (cdb.c:396)
==4294==    by 0x41B63C: exec_service_action (cdb.c:563)
==4294==    by 0x41C299: osdemu_cmd_submit (cdb.c:807)
==4294==    by 0x40B9F2: bs_osdemu_cmd_submit (bs_osdemu.c:80)
==4294==    by 0x40A14F: osd_varlen_cdb (osd.c:159)
==4294==    by 0x40A4EB: scsi_cmd_perform (scsi.c:122)
==4294==    by 0x40672B: target_cmd_queue (target.c:431)
==4294==    by 0x40F340: iscsi_target_cmd_queue (iscsid.c:1086)
==4294==    by 0x40F3D4: iscsi_scsi_cmd_execute (iscsid.c:1103)
==4294== 
==4294== Conditional jump or move depends on uninitialised value(s)
==4294==    at 0x3772E30112: sqlite3_prepare (in /usr/lib64/libsqlite3.so.0.8.6)
==4294==    by 0x41ECE9: obj_insert (obj.c:24)
==4294==    by 0x41862E: osd_create (osd.c:810)
==4294==    by 0x41AD86: cdb_create (cdb.c:396)
==4294==    by 0x41B63C: exec_service_action (cdb.c:563)
==4294==    by 0x41C299: osdemu_cmd_submit (cdb.c:807)
==4294==    by 0x40B9F2: bs_osdemu_cmd_submit (bs_osdemu.c:80)
==4294==    by 0x40A14F: osd_varlen_cdb (osd.c:159)
==4294==    by 0x40A4EB: scsi_cmd_perform (scsi.c:122)
==4294==    by 0x40672B: target_cmd_queue (target.c:431)
==4294==    by 0x40F340: iscsi_target_cmd_queue (iscsid.c:1086)
==4294==    by 0x40F3D4: iscsi_scsi_cmd_execute (iscsid.c:1103)
==4294== 
==4294== Conditional jump or move depends on uninitialised value(s)
==4294==    at 0x3772E30112: sqlite3_prepare (in /usr/lib64/libsqlite3.so.0.8.6)
==4294==    by 0x41CA78: attr_set_attr (attr.c:46)
==4294==    by 0x4186FA: osd_create (osd.c:822)
==4294==    by 0x41AD86: cdb_create (cdb.c:396)
==4294==    by 0x41B63C: exec_service_action (cdb.c:563)
==4294==    by 0x41C299: osdemu_cmd_submit (cdb.c:807)
==4294==    by 0x40B9F2: bs_osdemu_cmd_submit (bs_osdemu.c:80)
==4294==    by 0x40A14F: osd_varlen_cdb (osd.c:159)
==4294==    by 0x40A4EB: scsi_cmd_perform (scsi.c:122)
==4294==    by 0x40672B: target_cmd_queue (target.c:431)
==4294==    by 0x40F340: iscsi_target_cmd_queue (iscsid.c:1086)
==4294==    by 0x40F3D4: iscsi_scsi_cmd_execute (iscsid.c:1103)
==4294== 
==4294== Conditional jump or move depends on uninitialised value(s)
==4294==    at 0x3772E30112: sqlite3_prepare (in /usr/lib64/libsqlite3.so.0.8.6)
==4294==    by 0x41F3E9: obj_ispresent (obj.c:191)
==4294==    by 0x4185D6: osd_create (osd.c:800)
==4294==    by 0x41AD86: cdb_create (cdb.c:396)
==4294==    by 0x41B63C: exec_service_action (cdb.c:563)
==4294==    by 0x41C299: osdemu_cmd_submit (cdb.c:807)
==4294==    by 0x40B9F2: bs_osdemu_cmd_submit (bs_osdemu.c:80)
==4294==    by 0x40A14F: osd_varlen_cdb (osd.c:159)
==4294==    by 0x40A4EB: scsi_cmd_perform (scsi.c:122)
==4294==    by 0x40672B: target_cmd_queue (target.c:431)
==4294==    by 0x40F340: iscsi_target_cmd_queue (iscsid.c:1086)
==4294==    by 0x40F3D4: iscsi_scsi_cmd_execute (iscsid.c:1103)
==4294== 
==4294== Conditional jump or move depends on uninitialised value(s)
==4294==    at 0x3772E30112: sqlite3_prepare (in /usr/lib64/libsqlite3.so.0.8.6)
==4294==    by 0x41F85E: obj_get_type (obj.c:280)
==4294==    by 0x41920F: get_obj_type (osd.c:93)
==4294==    by 0x418EAD: osd_getattr_list (osd.c:1044)
==4294==    by 0x41A80D: get_attr_list (cdb.c:216)
==4294==    by 0x41ABD4: get_attributes (cdb.c:333)
==4294==    by 0x41B9B2: exec_service_action (cdb.c:628)
==4294==    by 0x41C299: osdemu_cmd_submit (cdb.c:807)
==4294==    by 0x40B9F2: bs_osdemu_cmd_submit (bs_osdemu.c:80)
==4294==    by 0x40A14F: osd_varlen_cdb (osd.c:159)
==4294==    by 0x40A4EB: scsi_cmd_perform (scsi.c:122)
==4294==    by 0x40672B: target_cmd_queue (target.c:431)
==4294== 
==4294== ERROR SUMMARY: 390 errors from 13 contexts (suppressed: 5 from 1)
==4294== malloc/free: in use at exit: 18,818 bytes in 21 blocks.
==4294== malloc/free: 28,320 allocs, 28,299 frees, 12,978,926 bytes allocated.
==4294== For counts of detected errors, rerun with: -v
==4294== searching for pointers to 21 not-freed blocks.
==4294== checked 284,448 bytes.
==4294== 
==4294== 
==4294== 48 bytes in 1 blocks are definitely lost in loss record 3 of 11
==4294==    at 0x4A05879: malloc (vg_replace_malloc.c:149)
==4294==    by 0x40580A: it_nexus_create (target.c:93)
==4294==    by 0x416534: session_create (session.c:110)
==4294==    by 0x40D922: login_finish (iscsid.c:410)
==4294==    by 0x40DD62: cmnd_exec_login (iscsid.c:575)
==4294==    by 0x40E314: cmnd_execute (iscsid.c:700)
==4294==    by 0x410DBE: iscsi_rx_handler (iscsid.c:1715)
==4294==    by 0x41111F: iscsi_event_handler (iscsid.c:1823)
==4294==    by 0x403D46: event_loop (tgtd.c:230)
==4294==    by 0x40413A: main (tgtd.c:339)
==4294== 
==4294== 
==4294== 112 bytes in 8 blocks are definitely lost in loss record 4 of 11
==4294==    at 0x4A05879: malloc (vg_replace_malloc.c:149)
==4294==    by 0x3771275221: strdup (in /lib64/libc-2.5.so)
==4294==    by 0x418206: osd_open (osd.c:674)
==4294==    by 0x40B883: bs_osdemu_open (bs_osdemu.c:39)
==4294==    by 0x405C9F: tgt_device_path_update (target.c:169)
==4294==    by 0x405ED6: tgt_device_create (target.c:232)
==4294==    by 0x4045D4: device_mgmt (mgmt.c:173)
==4294==    by 0x40496A: tgt_mgmt (mgmt.c:278)
==4294==    by 0x4051A0: autoconf_iscsi_osdemu (mgmt.c:533)
==4294==    by 0x40561C: ipc_init (mgmt.c:653)
==4294==    by 0x404122: main (tgtd.c:335)
==4294== 
==4294== 
==4294== 120 bytes in 3 blocks are possibly lost in loss record 5 of 11
==4294==    at 0x4A05879: malloc (vg_replace_malloc.c:149)
==4294==    by 0x403923: tgt_event_add (tgtd.c:141)
==4294==    by 0x413DF3: iscsi_tcp_init (iscsi_tcp.c:174)
==4294==    by 0x413914: iscsi_init (transport.c:22)
==4294==    by 0x403DB2: lld_init (tgtd.c:243)
==4294==    by 0x404011: main (tgtd.c:304)
==4294== 
==4294== LEAK SUMMARY:
==4294==    definitely lost: 160 bytes in 9 blocks.
==4294==      possibly lost: 120 bytes in 3 blocks.
==4294==    still reachable: 18,538 bytes in 9 blocks.
==4294==         suppressed: 0 bytes in 0 blocks.
==4294== Reachable blocks (those to which a pointer was found) are not shown.
==4294== To see them, rerun with: --show-reachable=yes
